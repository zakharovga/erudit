$(document).ready(function(){var a=$("#register-form"),b=$("#register-success"),c=$("#email-form-group"),d=$("#username-form-group"),e=$("#password-form-group"),f=$("#password-repeat-form-group"),g=$("#submit-btn");a.submit(function(h){h.preventDefault(),g.prop("disabled",!0),$(".error-msg").hide();var i=$("#username-input").val(),j=!0;a.find("input").each(function(){var a=$(this).parents(".form-group"),b=a.find(".form-control-feedback");this.checkValidity()?(a.addClass("has-success").removeClass("has-error"),b.addClass("glyphicon-ok").removeClass("glyphicon-remove")):(a.addClass("has-error").removeClass("has-success"),b.addClass("glyphicon-remove").removeClass("glyphicon-ok"),j=!1)}),e.find("input").val()!==f.find("input").val()&&(e.addClass("has-error").removeClass("has-success"),f.addClass("has-error").removeClass("has-success"),e.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),f.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),$("#password-error-msg").text("\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0435 \u043f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442").show(),j=!1),j?(a.find(".form-group").removeClass("has-error").addClass("has-success"),$(".form-control-feedback").addClass("glyphicon-ok").removeClass("glyphicon-remove"),$.ajax({type:"POST",url:"register",data:a.serialize(),success:function(h){console.log(h);var j=h.valid;if(j)$("#registration-username").text(i),a.hide(),b.show();else for(var k=h.errors,l=0;l<k.length;l++)"EMAIL_VALIDATION_ERROR"===k[l]&&(c.addClass("has-error").removeClass("has-success"),c.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),$("#email-error-msg").text("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email").show()),"USERNAME_VALIDATION_ERROR"===k[l]&&(d.addClass("has-error").removeClass("has-success"),d.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),$("#username-error-msg").text("\u0412 \u0438\u043c\u0435\u043d\u0438 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0442 3 \u0434\u043e 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 (\u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u0430)").show()),"PASSWORD_VALIDATION_ERROR"===k[l]&&(e.addClass("has-error").removeClass("has-success"),f.addClass("has-error").removeClass("has-success"),e.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),f.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),$("#password-error-msg").text("\u0412 \u043f\u0430\u0440\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0442 3 \u0434\u043e 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 (\u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u0441\u0438\u043c\u0432\u043e\u043b \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u044f)").show()),"DUPLICATE_ERROR"===k[l]&&(c.addClass("has-error").removeClass("has-success"),d.addClass("has-error").removeClass("has-success"),c.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),d.find(".form-control-feedback").addClass("glyphicon-remove").removeClass("glyphicon-ok"),$("#email-error-msg").text("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c/email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442").show());g.prop("disabled",!1)}})):g.prop("disabled",!1)})});